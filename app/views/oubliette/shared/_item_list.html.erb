<% if [Oubliette::StaticPagesController, Oubliette::FileBatchesController].include?(controller.class) %>
  <form method="GET">
    <div class="input-group">
      <input name="query" type="text" class="form-control" placeholder="Search" value="<%= @query %>"></input>
      <span class="input-group-btn">
        <button type="submit" class="btn btn-default"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></button>
      </span>
    </div>  
  </form>
<% end %>
<table class="table">
  <tbody>
    <% items = items.select do |item| can?(:show,item) end %>
    <% items.each_with_index do |item,counter| %>
      <%= render_one self, ["#{item.class.to_s.pluralize.underscore}/item_list_row",'durham_rails/base_shared/item_list_row'], item: item, counter: counter %>
    <% end %>
  </tbody>
</table>
